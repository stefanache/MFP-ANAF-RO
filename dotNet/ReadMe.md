Un client ***.Net*** pt **ANAF** poate fi gasit in acest depozit [***Anaf.Net***](https://github.com/sibies/Anaf.Net)

[***Reinprospatarea jeton***](https://code-maze.com/using-refresh-tokens-in-asp-net-core-authentication/)/[token](https://code-maze.com/using-refresh-tokens-in-asp-net-core-authentication/)-ului [OAuth 2.0](https://www.techmeet360.com/blog/refresh-token-in-web-api/) in [**ASP(C#) / .NET6.0 Core**](https://github.com/CodeMazeBlog/aspnetcore-jwt-auth/tree/aspnetcore-jwt-auth-refresh-tokens)

Nu uitati informatii oficiale despre serviciile web **ANAF** gasiti in articolul intitulat [***Prezentare servicii web pentru Sistemul national privind factura electronica RO e-Factura***](https://mfinante.gov.ro/static/10/eFactura/prezentare%20apeluri%20API%20E-factura.pdf);

Am gasit acest repository [RomaniaOpenData](https://github.com/ignatandrei/RomaniaOpenData/tree/master), de altfel extrem de util, dar nu stiu in ce masura este intretinut/actualizat/mentinut in viata!

Poate fi de folos insa acest [github-repository](https://github.com/GSA/data.gov?tab=readme-ov-file) care se refera la site/portalul-ul guvernului(serverul [CKAN](https://demo.ckan.org/ro/about)): **dataset.gov.ro**; 

Pentru coderi/codificatori/programatori: API-ul CKAN([**Action API**](https://docs.ckan.org/en/2.9/api/)) comunica in stil [RPC](https://en.wikipedia.org/wiki/Remote_procedure_call)

- a se consulta [actiunile/activitatea](https://data.gov.ro/ro/api/1/util/snippet/api_info.html?resource_id=8f43aa12-3bf9-4c14-b13f-dc0e490a92c5) privind acest portal!!!

- exemplu-CKAN-Resource-ID=[**8f43aa12-3bf9-4c14-b13f-dc0e490a92c5**](https://data.gov.ro/dataset/stadiul-absorbtiei-fondurilor-europene/resource/8f43aa12-3bf9-4c14-b13f-dc0e490a92c5)
  <br/>Stadiul absorbției pentru programele finanțate din Fondurile Europene Structurale și de Investiții (FESI) și al plăților efectuate din
  <br/>Fondul European de Garantare Agricolă (FEGA), pentru perioada... 2014-28 august 2020
  <br/>ckan-URL(resursa-colectieie-de-fisiere **8f43aa12-3bf9-4c14-b13f-dc0e490a92c5** din dataset-ul [10767d4c-8398-4b60-b17a-aa526f55e946](https://data.gov.ro/dataset/10767d4c-8398-4b60-b17a-aa526f55e946)):  <br/>https://data.gov.ro/dataset/10767d4c-8398-4b60-b17a-aa526f55e946/resource/8f43aa12-3bf9-4c14-b13f-dc0e490a92c5/download/stadiul-absorbiei-fon     
  <br/>Aceasta resursa cuprinde/este o colectie de fisiere xls(Excel):     

<details
  <summary>Date şi resurse ce pot fi descarca/download-abile recursiv... detalii...</summary>

<hr/>

<pre>
Stadiul absorbtiei - 30 martie 2018XLSX
Stadiul absorbtiei - 30 iunie 2018XLSX
Stadiul absorbtiei - 3 august 2018XLSX
Stadiul absorbtiei - 31 august 2018XLSX
Stadiul absorbtiei - 29 septembrie 2018XLSX
Stadiul absorbtiei -2 noiembrie 2018XLSX
Stadiul absorbției - 1 decembrie 2018XLSX
Stadiul absorbției - 31 decembrie 2018XLSX
Stadiul absorbției - 1 februarie 2019XLSX
Stadiul absorbției - 1 martie 2019XLSX
Stadiul absorbției - 29 martie 2019XLSX
Stadiul absorbției - 3 mai 2019XLSX
Stadiul absobției - 31 mai 2019XLSX
Stadiul absorbției - 1 iulie 2019XLSX
Stadiul absorbției - 2 august 2019XLSX
Stadiul absorbției - 30 august 2019XLSX
Stadiul absorbției - 27 septembrie 2019XLSX
Stadiul absobției - 1 noiembrie 2019XLSX
Stadiul absobției - 29 noiembrie 2019XLSX
Stadiul absorbției - 31 decembrie 2019XLSX
Stadiul absobției - 31 ianuarie 2020XLSX
Stadiul absorbției - 29 februarie 2020XLSX
Stadiul absorbtiei - 3 aprilie 2020XLSX
Stadiul absorbtiei - 30 aprilie 2020XLSX
Stadiul absorbției - 1 iunie 2020XLSX
Stadiul absorbției - 3 iulie 2020XLSX
Stadiul absorbției - 31 iulie 2020XLSX
Stadiul absorbției - 28 august 2020XLSX
Stadiul absorbției - 2 octombrie 2020XLSX
Stadiul absorbției - 30 octombrie 2020XLSX
Stadiul absorbției - 4 decembrie 2020XLSX
Stadiul absorbției - 31 decembrie 2020XLSX
Stadiul absorbției - 31 ianuarie 2021XLSX
Stadiul absorbției - 28 februarie 2021XLSX
Stadiul absorbției - 2 aprilie 2021XLSX
Stadiul absorției - 29 aprilie 2021XLSX
Stadiul absorției - 31 mai 2021XLSX
Stadiul absorției- 2 iulie 2021XLSX
Stadiul absorției - 30 iulie 2021XLSX
Stadiul absorbtiei - 3 septembrie 2021XLSX
Stadiul absorbției - 1 octombrie 2021XLSX
Stadiul absorbtiei - 29 octombrie 2021XLSX
Stadiul absorbției - 3 decembrie 2021XLSX
Stadiul absorbției - 31 decembrie 2021XLSX
Stadiul absorbției - 4 februarie 2022XLSX
Stadiul absorbtiei - 4 martie 2022XLSX
Stadiul absorbtiei - 1 aprilie 2022XLSX
Stadiul absorbtiei - 02 mai 2022XLSX
Stadiul absorbtiei - 3 iunie 2022XLSX
Stadiul absorbtiei - 1 iulie 2022XLSX
Stadiul absorbției fondurilor UE - 29 iulie 2022XLSX
Stadiul absobrției fondurilor UE - 2 ...XLSX
Stadiul absorbției fondurilor UE - 29 ...XLSX
Stadiul absorbției fondurilor UE - 04 ...XLSX
Stadiul absorbției fondurilor UE - 2 decembrie ...XLSX
Stadiul absorbției fondurilor UE - 31 ...XLSX
Stadiul absorbtiei - 03 februarie 2023XLSX
Stadiul absorbtiei 3 martie 2023XLSX
Stadiul absorbtiei PO 2014-2020 - 31 martie 2023XLSX
Stadiul absorbtiei - 28 aprilie 2023XLSX
Stadiul absorbției - 31 mai 2023XLSX
Stadiul absorbtiei - 30 iunie 2023XLSX
Stadiul implementarii - 31 iulie 2023XLSX
Stadiul absorbtiei - 1 septembrie 2023XLSX
Stadiul absorbtiei - 29 septembrie 2023XLSX
Stadiul absorbtiei - 31 octombrie 2023XLSX
Stadiul absorbției - 30 noiembrie 2023XLSX
Stadiul absorbtiei - 31 decembrie 2023XLSX
Stadiul absorbției -2 februarie 2024XLSX
Stadiul absorbției - 1 martie 2024XLSX
Stadiul absorbției - 31 martie 2024XLSX
Stadiul absorbtiei - 30 aprilie 2024XLSX
Stadiul absorbtiei - 6 august 2024XLSX
Stadiul absorbției - 30 august 2024XLSX
Stadiul absorbtiei - 30 septembrie 2024XLSX
Stadiul absorbtiei - 31 octombrie 2024</pre>

<hr/>

</details>

  <br/>Fiecare fisier la randul sau fiind o resursa: ex. primul fisier are resourceid=[*d499ce49-b9dc-437d-ba62-49ec00e06c68*](https://data.gov.ro/dataset/stadiul-absorbtiei-fondurilor-europene/resource/d499ce49-b9dc-437d-ba62-49ec00e06c68)
  <br> Daca dati/accesati pe link-ul **API-Data** care este un link pt URL=*https://data.gov.ro/api/1/util/snippet/api_info.html?resource_id=d499ce49-b9dc-437d-ba62-49ec00e06c68*, obtineti un fragment de cod-api(snippet) **JS** si unul **python**(generate in mod automat, folosind un utilitar-api) cu care puteti accesa direct (aceasta resursa fiind deci primul fisier xslx al intregii colectii de fisiere)

<br/>Iata aici 3 moduri de cautare pe/pt aceiasi resursa/colectie mare de fisiere xslx(resourceid=**8f43aa12-3bf9-4c14-b13f-dc0e490a92c5**), toate vazute la un loc ca un singur datastore/dataset:

- 1)exemplu-CKAN-action(api)-procedura-RPC=*datastore_search*: [cerere/search/cautare Top-5(primele 5) rezultate](https://data.gov.ro/ro/api/3/action/datastore_search?resource_id=8f43aa12-3bf9-4c14-b13f-dc0e490a92c5&limit=5)
<details>
    <summary>raspunsul-1 JSON... detalii...</summary>

<hr/>

<br/> query: https://data.gov.ro/ro/api/3/action/datastore_search?resource_id=8f43aa12-3bf9-4c14-b13f-dc0e490a92c5&limit=5


<pre>{
  "help": "https://data.gov.ro/ro/api/3/action/help_show?name=datastore_search",
  "success": true,
  "result": {
    "include_total": true,
    "resource_id": "8f43aa12-3bf9-4c14-b13f-dc0e490a92c5",
    "fields": [
      {
        "type": "int",
        "id": "_id"
      },
      {
        "type": "text",
        "id": "1.0"
      },
      {
        "type": "numeric",
        "id": "2.0"
      },
      {
        "type": "numeric",
        "id": "3=(2/1)*100"
      },
      {
        "type": "numeric",
        "id": "4.0"
      },
      {
        "type": "numeric",
        "id": "5=(4/1)*100"
      },
      {
        "type": "numeric",
        "id": "6.0"
      },
      {
        "type": "numeric",
        "id": "7=(6/1)*100"
      },
      {
        "type": "numeric",
        "id": "8.0"
      },
      {
        "type": "numeric",
        "id": "9=(8/1)*100"
      },
      {
        "type": "numeric",
        "id": "10=4+8"
      },
      {
        "type": "numeric",
        "id": "11=(10/1)*100"
      }
    ],
    "records_format": "objects",
    "records": [
      {
        "_id": 1,
        "1.0": "6860000000",
        "2.0": 2059268272.5000002,
        "3=(2/1)*100": 0.3001848793731779,
        "4.0": 641117098.7600002,
        "5=(4/1)*100": 0.0934573030262391,
        "6.0": 1807584848.44,
        "7=(6/1)*100": 0.2634963335918367,
        "8.0": 1538357574.547,
        "9=(8/1)*100": 0.2242503752983965,
        "10=4+8": 2179474673.307,
        "11=(10/1)*100": 0.3177076783246356
      },
      {
        "_id": 2,
        "1.0": "8638524484",
        "2.0": 2712539665.7208495,
        "3=(2/1)*100": 0.31400497512566283,
        "4.0": 924174447.21,
        "5=(4/1)*100": 0.10698290534705626,
        "6.0": 2836367233.88,
        "7=(6/1)*100": 0.3283393175690396,
        "8.0": 2473844284.5220003,
        "9=(8/1)*100": 0.28637347606110003,
        "10=4+8": 3398018731.7320004,
        "11=(10/1)*100": 0.39335638140815626
      },
      {
        "_id": 3,
        "1.0": "1329787234",
        "2.0": 562186331.7314458,
        "3=(2/1)*100": 0.4227641214755757,
        "4.0": 131132674.48,
        "5=(4/1)*100": 0.09861177121211558,
        "6.0": 414795196.79999995,
        "7=(6/1)*100": 0.3119259880035816,
        "8.0": 354104791.844,
        "9=(8/1)*100": 0.26628680347520917,
        "10=4+8": 485237466.324,
        "11=(10/1)*100": 0.36489857468732473
      },
      {
        "_id": 4,
        "1.0": "4361566040",
        "2.0": 1838789410.992317,
        "3=(2/1)*100": 0.42158926269343316,
        "4.0": 407598820.70000005,
        "5=(4/1)*100": 0.0934524014910938,
        "6.0": 1314074483.6899998,
        "7=(6/1)*100": 0.3012850136025912,
        "8.0": 1107566971.145,
        "9=(8/1)*100": 0.25393791151790057,
        "10=4+8": 1515165791.845,
        "11=(10/1)*100": 0.34739031300899437
      },
      {
        "_id": 5,
        "1.0": "563588476",
        "2.0": 149038363.16693574,
        "3=(2/1)*100": 0.26444537018343106,
        "4.0": 54457756.9,
        "5=(4/1)*100": 0.09662681055245707,
        "6.0": 147943105.07,
        "7=(6/1)*100": 0.2625020052219804,
        "8.0": 128687977.194,
        "9=(8/1)*100": 0.22833677882725198,
        "10=4+8": 183145734.094,
        "11=(10/1)*100": 0.32496358937970904
      }
    ],
    "limit": 5,
    "_links": {
      "start": "/api/3/action/datastore_search?limit=5&resource_id=8f43aa12-3bf9-4c14-b13f-dc0e490a92c5",
      "next": "/api/3/action/datastore_search?offset=5&limit=5&resource_id=8f43aa12-3bf9-4c14-b13f-dc0e490a92c5"
    },
    "total": 21
  }
}</pre>

<hr/>

</details>

<details>
 <summary>Iata si explicatia(AI-consultantului) privind raspunsul-1 primit:...detalii...</summary> 
<hr/>
  
<pre>
Textul furnizat este un răspuns JSON de la un API web, special conceput pentru a returna date dintr-un depozit de date în contextul portalului de date al guvernului României. Iată o detaliere a conținutului său în limba engleză simplă:

1. **Link de ajutor**: prima parte conține un link pe care utilizatorii îl pot face clic pentru a obține ajutor despre acțiunea API numită „datastore_search”.

2. **Success Status**: Afișează o stare care indică faptul că cererea a avut succes (`"success": true`).

3. **Secțiunea Rezultate**: Această secțiune conține detaliile rezultatelor căutării:
   - **include_total**: aceasta indică faptul că numărul total de înregistrări din depozitul de date este inclus în răspuns.
   - **resource_id**: un identificator unic pentru setul de date specific accesat.
   
4. **Câmpuri**: o matrice de obiecte care definesc câmpurile disponibile în înregistrări:
   - Fiecare câmp are un tip (cum ar fi `int`, `text` sau `numeric`) și un identificator (de exemplu, `"1.0"` înseamnă că acesta este primul câmp, `"2.0"` este al doilea etc.).
   - Unele câmpuri calculează valori pe baza altor câmpuri, cum ar fi procente.

5. **Înregistrări**: Această secțiune conține înregistrările de date reale. Fiecare înregistrare are:
   - Un `_id` pentru identificarea înregistrării.
   - Diverse câmpuri cu date, cum ar fi valori numerice și procente calculate.
   - De exemplu, o înregistrare poate avea primul câmp (`"1.0"`) ca "6860000000", indicând un număr mare, cu diverse alte câmpuri oferind calcule numerice aferente.

6. **Limitare și linkuri**:
   - **Limita**: numărul de înregistrări returnate în acest răspuns este 5.
   - **Secțiunea de linkuri**: furnizează adrese URL pentru a prelua următorul set de înregistrări sau a început căutarea cu parametri specifici.

7. **Total Records**: În cele din urmă, se menționează că există un total de 21 de înregistrări disponibile în depozitul de date.

În general, acest răspuns JSON conține date structurate despre un anumit set de date, care detaliază câmpurile acestuia, unele valori calculate special și afișând un subset al totalului de înregistrări de date disponibile.</pre>

<hr/>

</details>
<details>
 <summary>Iata si sumarul/rezumatul/concluzia(AI-consultantului) privind raspunsul-1 primit:...detalii...</summary> 
<hr/>
  
<pre>
Datele furnizate constau dintr-un răspuns JSON care detaliază înregistrările diferitelor entități, fiecare identificată prin 
ID-uri unice. 
Înregistrările includ câmpuri numerice și textuale, cu procente calculate pe baza anumitor valori. 
Valorile cheie includ valori totale, precum și calcule suplimentare reprezentând proporții ale câmpurilor specifice în 
raport cu totalurile. 
În total, sunt disponibile 21 de înregistrări, cu 5 înregistrări afișate în acest fragment. 
Datele sunt structurate pentru regăsire și analiză ușoară prin punctele finale API specificate
</pre>

<hr/>

</details>

- 2)exemplu-CKAN-action(api)-procedura-RPC=*datastore_search*: [contains](https://data.gov.ro/ro/api/3/action/datastore_search?q=jones&resource_id=8f43aa12-3bf9-4c14-b13f-dc0e490a92c5)(q=jones)

<details>
    <summary>raspunsul-2 JSON... detalii...</summary>

<hr/>

<br/> query: https://data.gov.ro/ro/api/3/action/datastore_search?q=jones&resource_id=8f43aa12-3bf9-4c14-b13f-dc0e490a92c5)(q=jones)<br/>
  
<pre>{
"help": "https://data.gov.ro/ro/api/3/action/help_show?name=datastore_search", 
"success": true, 
"result": {
  "include_total": true, 
  "resource_id": "8f43aa12-3bf9-4c14-b13f-dc0e490a92c5", 
  "fields": \[
     {"type": "int",
     "id": "_id"
    }, 
    {
     "type": "text", 
     "id": "1.0"
     },
     {
      "type": "numeric",
      "id": "2.0"
      }, 
      {
      "type": "numeric", 
      "id": "3=(2/1)*100"
      },
      {
      "type": "numeric",
      "id": "4.0"
      }, 
      {
       "type": "numeric", 
       "id": "5=(4/1)*100"
       }, 
       {
       "type": "numeric",
       "id": "6.0"
       }, 
       {
       "type": "numeric",
       "id": "7=(6/1)*100"
       }, 
       {
       "type": "numeric", 
       "id": "8.0"
       }, 
       {
       "type": "numeric",
       "id": "9=(8/1)*100"
       }, 
       {
       "type": "numeric",
       "id": "10=4+8"
       }, 
       {
       "type": "numeric", 
       "id": "11=(10/1)*100"
       }],
  "records_format": "objects",
  "q": "jones", 
  "records": [], 
  "_links": {
    "start": "/api/3/action/datastore_search?q=jones&resource_id=8f43aa12-3bf9-4c14-b13f-dc0e490a92c5", 
    "next": "/api/3/action/datastore_search?q=jones&offset=100&resource_id=8f43aa12-3bf9-4c14-b13f-dc0e490a92c5"}, 
    "total": 0}
}</pre>

<hr/>

  </details>
  
- 3)exemplu-CKAN-action(api)-procedura-RPC=*datastore_search_sql*: [via/utilizand SQL](https://data.gov.ro/ro/api/3/action/datastore_search_sql?sql=SELECT+*+from+"8f43aa12-3bf9-4c14-b13f-dc0e490a92c5")
<details>
    <summary>raspunsul-3 JSON... detalii...</summary>

<hr/>

<br/> query: https://data.gov.ro/ro/api/3/action/datastore_search_sql?sql=SELECT+*+from+"8f43aa12-3bf9-4c14-b13f-dc0e490a92c5"

<pre>
  
</pre>

<hr/>

</details>
 - Un simplu fragment de cod ajax (JSONP), care reprezinta o cerere/request catre  datele-API-ului folosind jQuery:

<details>
  <summary>A simple ajax (JSONP) request to the data API using jQuery...details...</summary>

  <hr/>
  
        var data = {
          resource_id: '8f43aa12-3bf9-4c14-b13f-dc0e490a92c5', // the resource id
          limit: 5, // get 5 results
          q: 'jones' // query for 'jones'
        };
        $.ajax({
          url: 'https://data.gov.ro/ro/api/3/action/datastore_search',
          data: data,
          dataType: 'jsonp',
          success: function(data) {
            alert('Total results found: ' + data.result.total)
          }
        });

 - Exemplu: Python »
   
        import urllib
        url = 'https://data.gov.ro/ro/api/3/action/datastore_search?resource_id=8f43aa12-3bf9-4c14-b13f-dc0e490a92c5&limit=5&q=title:jones'  
        fileobj = urllib.urlopen(url)
        print fileobj.read()

<hr/>

</details>

[Aici](https://github.com/GSA/ckan-php-client) puteti gasi un *client*-**CKAN** scris in *PhP* iar [aici](https://github.com/KRontheWeb/ckan-downloader) unul scris in *Python*(se poate folosi si [cURL](https://stackoverflow.com/questions/38271351/download-resources-from-private-ckan-datasets)-ul).
