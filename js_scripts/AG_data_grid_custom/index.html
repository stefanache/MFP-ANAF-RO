<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AG Grid Example</title>
        <!-- Includes all JS & CSS for the JavaScript Data Grid -->
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-community/dist/ag-grid-community.min.js"></script>
  <style>
    #myGrid {
      height: 400px;
      width: 100%;
    }
  </style>
</head>
<body>
  <h2>AG Grid - Test dinamic</h2>
  <button onclick="addColumn()">Adaugă coloană</button>
  <div id="myGrid" class="ag-theme-alpine"></div>

  <script>
    const columnDefs = [
      { field: "nume", filter: true, resizable: true },
      { field: "varsta", filter: true, resizable: true }
    ];

    const rowData = [
      { nume: "Ana", varsta: 25 },
      { nume: "Ion", varsta: 30 }
    ];

    const gridOptions = {
      columnDefs: columnDefs,
      rowData: rowData,
      defaultColDef: {
        sortable: true,
        editable: true,
        resizable: true,
        filter: true
      },
      animateRows: true
    };

    let grid;

    document.addEventListener('DOMContentLoaded', () => {
      const eGridDiv = document.querySelector('#myGrid');
      grid = new agGrid.Grid(eGridDiv, gridOptions);
    });

    function addColumn() {
      const newColumn = { field: "email", filter: true, resizable: true };
      columnDefs.push(newColumn);

      // Adaugă date și coloana în mod dinamic
      gridOptions.api.setColumnDefs(columnDefs);
      gridOptions.api.setRowData([
        { nume: "Ana", varsta: 25, email: "ana@email.com" },
        { nume: "Ion", varsta: 30, email: "ion@email.com" }
      ]);
    }
  </script>
</body>
</html>
