<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AG Grid - Grid Personalizabil</title>
    <!-- Includes all JS & CSS for the JavaScript Data Grid -->
    <script src="https://cdn.jsdelivr.net/npm/ag-grid-community/dist/ag-grid-community.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    #myGrid { height: 400px; width: 100%; }
    .toolbar button { margin-right: 10px; }
  </style>
</head>
<body>

  <div class="toolbar">
    <button onclick="addColumn()">Adaugă Coloană</button>
    <button onclick="removeLastColumn()">Șterge Ultima Coloană</button>
    <button onclick="addRow()">Adaugă Rând</button>
    <button onclick="refreshData()">Refresh Rânduri</button>
  </div>

  <div id="myGrid" class="ag-theme-alpine"></div>

  <script>
    let columnDefs = [
      { field: "nume", filter: true, resizable: true },
      { field: "varsta", filter: "agNumberColumnFilter", resizable: true },
      { field: "email", filter: true, resizable: true }
    ];

    let rowData = [
      { nume: "Ana", varsta: 25, email: "ana@email.com" },
      { nume: "Ion", varsta: 30, email: "ion@email.com" },
      { nume: "Maria", varsta: 28, email: "maria@email.com" }
    ];

    const gridOptions = {
      columnDefs: columnDefs,
      rowData: rowData,
      animateRows: true,
      defaultColDef: {
        sortable: true,
        editable: true
      }
    };

    const gridDiv = document.querySelector('#myGrid');
    new agGrid.Grid(gridDiv, gridOptions);

    // Adaugă o nouă coloană
    function addColumn() {
      const newField = "nou_" + (columnDefs.length + 1);
      columnDefs.push({ field: newField, filter: true, resizable: true });
      gridOptions.api.setColumnDefs(columnDefs);
    }

    // Șterge ultima coloană
    function removeLastColumn() {
      if (columnDefs.length > 0) {
        columnDefs.pop();
        gridOptions.api.setColumnDefs(columnDefs);
      }
    }

    // Adaugă un rând nou
    function addRow() {
      const newRow = {};
      columnDefs.forEach(col => newRow[col.field] = "Valoare");
      gridOptions.api.applyTransaction({ add: [newRow] });
    }

    // Simulează un refresh al rândurilor (reload)
    function refreshData() {
      const newData = [
        { nume: "George", varsta: 45, email: "george@email.com" },
        { nume: "Diana", varsta: 22, email: "diana@email.com" }
      ];
      gridOptions.api.setRowData(newData);
    }
  </script>

</body>
</html>
